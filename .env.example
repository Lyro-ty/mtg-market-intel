# =============================================================================
# MTG Market Intel - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=mtg_user
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=mtg_market_intel
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Read replica for Discord bot (optional, falls back to primary)
# DATABASE_REPLICA_URL=postgresql+asyncpg://user:pass@replica-host:5432/db

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/0

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=true
SECRET_KEY=your_secret_key_here_change_in_production
CORS_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000"]

# -----------------------------------------------------------------------------
# OAuth Configuration (Google)
# -----------------------------------------------------------------------------
# To enable Google OAuth:
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create OAuth 2.0 Client ID (Web application)
# 3. Add authorized redirect URI: http://localhost:8000/api/auth/google/callback
# 4. Copy Client ID and Client Secret below
OAUTH_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8000/api/auth/google/callback
FRONTEND_URL=http://localhost:3000
DOMAIN=localhost

# -----------------------------------------------------------------------------
# LLM Provider Configuration
# -----------------------------------------------------------------------------
# Options: openai, anthropic
LLM_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-haiku-20240307

# -----------------------------------------------------------------------------
# Marketplace API Keys (as needed)
# -----------------------------------------------------------------------------
# TCGPlayer (https://developer.tcgplayer.com/)
TCGPLAYER_API_KEY=
TCGPLAYER_API_SECRET=

# CardTrader (https://www.cardtrader.com/docs/api/full)
CARDTRADER_API_TOKEN=
CARDTRADER_SECRET_KEY=

# Manapool (https://manapool.com/api/docs/v1)
MANAPOOL_API_TOKEN=

# TopDeck.gg (for tournament data)
TOPDECK_API_KEY=

# NewsAPI.ai (for MTG news aggregation)
# Get your API key at https://newsapi.ai/ (free tier: 2000 searches/month)
NEWSAPI_AI_KEY=

# -----------------------------------------------------------------------------
# Scryfall Configuration (no API key required)
# -----------------------------------------------------------------------------
SCRYFALL_BASE_URL=https://api.scryfall.com
SCRYFALL_RATE_LIMIT_MS=100

# -----------------------------------------------------------------------------
# Scraping Configuration
# -----------------------------------------------------------------------------
SCRAPER_USER_AGENT=MTGMarketIntel/1.0 (Educational/Research Purpose)
SCRAPER_RATE_LIMIT_SECONDS=1
SCRAPER_MAX_RETRIES=3
SCRAPER_BACKOFF_FACTOR=2

# -----------------------------------------------------------------------------
# Celery Beat Schedule (cron expressions)
# -----------------------------------------------------------------------------
SCRAPE_INTERVAL_MINUTES=30
ANALYTICS_INTERVAL_HOURS=1
RECOMMENDATIONS_INTERVAL_HOURS=6

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_NAME=MTG Market Intel

# -----------------------------------------------------------------------------
# Monitoring & Error Tracking
# -----------------------------------------------------------------------------
# Environment name (development, staging, production)
ENVIRONMENT=development

# Sentry.io DSN for error tracking
# Create a project at https://sentry.io and get your DSN
SENTRY_DSN=
NEXT_PUBLIC_SENTRY_DSN=

# UptimeRobot (https://uptimerobot.com)
# Set up monitors for these endpoints:
# 1. Backend health: https://your-domain.com/api/health (HTTP 200)
# 2. Frontend: https://your-domain.com/ (keyword: "Dualcaster")
# 3. API docs: https://your-domain.com/docs (keyword: "Swagger")

# -----------------------------------------------------------------------------
# Discord Integration (Phase 0+)
# -----------------------------------------------------------------------------
# 1. Go to https://discord.com/developers/applications
# 2. Create New Application → "Dualcaster Deals"
# 3. OAuth2 → Add Redirect: http://localhost:8000/api/oauth/discord/callback
# 4. Copy Client ID and Client Secret

# Discord OAuth (for account linking)
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URI=http://localhost:8000/api/oauth/discord/callback

# Discord Bot (Phase 1 - separate from OAuth)
# Go to Bot section → Reset Token → Enable Message Content Intent
DISCORD_BOT_TOKEN=
DISCORD_BOT_API_KEY=generate_a_random_32_char_string_here

# Discord Bot Settings
# Guild ID for instant slash command sync (optional - global sync takes 1 hour)
DISCORD_GUILD_ID=
# Enable/disable DM alerts
ENABLE_DISCORD_ALERTS=true
# How often to poll for pending alerts (seconds)
DISCORD_ALERT_POLL_INTERVAL=30

# -----------------------------------------------------------------------------
# Email Service (Phase 0 - Notifications)
# -----------------------------------------------------------------------------
# Options: resend, sendgrid, smtp, console (for dev)
EMAIL_PROVIDER=console
EMAIL_FROM_ADDRESS=notifications@dualcasterdeals.com
EMAIL_FROM_NAME=Dualcaster Deals

# Resend (https://resend.com - free tier: 3000 emails/month)
RESEND_API_KEY=

# SendGrid (https://sendgrid.com)
SENDGRID_API_KEY=

# SMTP (generic)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# Stripe Connect (Phase 3 - Escrow)
# -----------------------------------------------------------------------------
# 1. Go to https://dashboard.stripe.com/apikeys
# 2. Enable Connect in settings
# 3. Set up webhook endpoint: /api/webhooks/stripe
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PLATFORM_FEE_PCT=2.0

